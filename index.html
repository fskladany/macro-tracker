<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Macro Tracker</title>

  <link rel="stylesheet" href="ui-node.css">
  <link rel="stylesheet" href="index-overlay.css">
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      background-color: #888;
      /* Prevent scrolling */
    }

    .main-container {
      position: relative;
      /* Container for draggable elements */
      width: 100%;
      max-width: 1200px;
      /* Adjust based on your layout */
    }


    input,
    button,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ddd;
      background-color: #CCC;
      box-sizing: border-box;
      font-size: 20px;
    }

    button {
      background-color: rgb(120, 161, 149);
      color: white;
      cursor: pointer;
    }

    button.subtle {
      background-color: rgb(144, 169, 162);
      color: rgb(82, 79, 79);

      cursor: pointer;
      margin: auto;
      width: 48%;
      margin-left: 1%;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th,
    td {
      text-align: left;
      padding: 8px;
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
    }

    .totals,
    .totals24 {
      margin-top: 15px;
    }

    .total-item {
      margin-bottom: 10px;
    }

    #addEntryWindow {
      width: 450px;
    }

    #historyWindowParent {
      top: 70px;
      left: 40px;
      width: 400px;

    }

    #todaySumWindow {
      top: 10px;
      right: 10px;
      font-size: 34px;
    }

    #dayListOverviewParent {
      top: 600px;
      right: -50px;
    }

    .goal-reached {
      background-color: rgb(255, 0, 0);
      color: white;
    }


    .halfway-there {
      background-color: rgb(255, 238, 0);
    }

    .totals div,
    .totals24 div {
      font-size: 26px;
    }
  </style>
  <script src="Permission.js"></script> 
  <script src="ui-node.js"></script>
  <script src="key-bindings.js"></script> 
  <script src="ingredients.js"></script>
  <script src="macro-tracker.js"></script>
  <script src="ui-node.js"></script>
  <script src="key-bindings.js"></script>
 
   <script>



    // Call this function on page load to populate the select dropdown
    document.addEventListener('DOMContentLoaded', function() {
        window.MacroTracker.LoadFoodItemTemplates();
              // Initial table and totals update
      window.MacroTracker.displayHistoryTable();
      window.MacroTracker.updateDailyTotals();

      window.MacroTracker.DisplayDailyTotals();
      window.KeyboardPermission.SetKeyboardEvents();

      window.UiNode.dragElement(document.getElementById("historyWindow"));
  
      window.UiNode.dragElement(document.getElementById("todaySumWindow"));
      window.UiNode.dragElement(document.getElementById("addEntryWindow"));
      window.UiNode.dragElement(document.getElementById("dayListOverviewParent"));

 

    // Activate the drag function for the draggable elements

    });

  </script>
</head>

<body>

  <div id="addEntryWindow" class="draggable container" style="z-index: 100;">
    <h1 style="margin-bottom:20px">Macro Tracker</h1>

    <label for="templateSelect" style="float: left">Choose a template:</label>
    <label style="float: right;" for="multiplier">Amount:</label>
    <select id="templateSelect" style="float: left;width:70%; left:0;" onchange="window.MacroTracker.handleFoodItemSelection()">
      <option value="">Manual template...</option>
    </select>

    <input style="float: right; width:23%" type="number" id="multiplier" placeholder="1=100g" step="0.5"
      onchange="window.MacroTracker.handleFoodItemSelection(true)" value="0.5">
    <button onclick="window.MacroTracker.AddEntry()">üêé (Commute through food)</button>
    <button onclick="window.MacroTracker.UndoLastEntry()">Undo Last Entry</button>


    <label for="fat">Fat (g)</label>
    <input type="number" id="fat" placeholder="Fat (g)" value="0">

    <label for="carbs">Carbs (g)</label>
    <input type="number" id="carbs" placeholder="Carbs (g)" value="0">

    <label for="protein">Protein (g)</label>
    <input type="number" id="protein" placeholder="Protein (g)" value="0">

    <label for="comment">Comment</label>
    <textarea id="comment" placeholder="Add a comment..."></textarea>

    <button class="subtle" onclick="window.MacroTracker.pasteEntries()">Load ...</button>
    <button class="subtle" onclick="window.MacroTracker.getEntriesJSON()">Get entries</button>

  </div>

  <div id="historyWindowParent" class="draggable sidebar" >
    <h3 style="float:left">History</h3>
    <input type="checkbox" id="allHistoryChk" style="margin-left:40%; width:40px" onchange="window.MacroTracker.displayHistoryTable()">
    <label for="allHistoryChk">all history</label>
    <div id="historyWindow">
      <table id="historyEntries">
        <tbody>
          <tr>
            <th>#</th>
            <th>Date</th>
            <th>Carbs</th>
            <th>Protein</th>
            <th>Fat</th>
            <th>Note</th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div id="dayListOverviewParent" class="draggable sidebar" >
    <h3>Day overview</h3>

    <div id="dayListOverview">
      <!--
      Day one ...
      Day two ...
      Day three ...
      -->
    </div>
  </div>

  <div id="todaySumWindow" class="draggable sidebar">

    <h4>24 hour Totals</h4>
    <div class="totals24">
      <div class="total-item">Calories (24h): <span id="t24calories">3086</span>kcal</div>
      <div class="total-item">Mass (24h): <span id="t24weight">693</span>g</div>

    </div>

    <h4>Today's Totals</h4>
    <div class="totals">

      <div class="total-item">Protein: <span id="totalProtein" class="halfway-there"></span>g</div>
      <div class="total-item">Carbs: <span id="totalCarbs" class=""></span>g</div>
      <div class="total-item">Fat: <span id="totalFat" class="goal-reached"></span>g</div>
      <div class="total-item">Calories: <span id="totalCalories" class="halfway-there"></span>kcal</div>

    </div>

  </div>



</body>
</html>